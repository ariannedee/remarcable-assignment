<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Products</title>
  <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css"
  >
  <style>
      .tool-card {
          height: 100%;
      }

      .tool-card .card-image {
          max-height: 140px;
      }

      .tool-card img {
          object-fit: contain;
          height: 100%;
          max-height: 140px;
      }
  </style>
</head>
<body>
<main class="container">
  <h1 class="is-size-1 has-text-centered mb-5">Products</h1>

  {# AI generated the form structure and styling using Bulma #}
  <form id="filterForm" method="GET" action="/">
    <div class="columns is-multiline">
      <div class="column is-4">
        <label class="label" for="searchInput">Search</label>
        <input id="searchInput" name="search" class="input" type="text"
               placeholder="Search by name or description..." value="{{ request.GET.search }}">
      </div>
      <div class="column is-3">
        <label class="label" for="categoryFilter">Category</label>
        <div class="select is-fullwidth">
          <select id="categoryFilter" name="category">
            <option value="">All Categories</option>
            {% for category in categories %}
              <option value="{{ category.pk }}"
                      {% if category.pk|stringformat:"d" == request.GET.category %}selected{% endif %}>{{ category.name }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
      <div class="column is-3">
        <label class="label" for="tagFilter">Tags</label>
        <div class="select is-fullwidth is-multiple">
          <select id="tagFilter" name="tags" multiple>
            {% for tag in tags %}
              <option value="{{ tag.pk }}" {% if tag.pk in selected_tags %}selected{% endif %}>{{ tag.name }}</option>
            {% endfor %}
          </select>
        </div>
        <p class="is-size-7 has-text-grey mt-1">
          Hold <strong>Ctrl (Windows)</strong> or <strong>Cmd (Mac)</strong> to select multiple tags.
        </p>
      </div>
      <div class="column is-2 buttons">
        <button class="button is-dark is-fullwidth mt-4 mb-3" type="submit">Filter</button>
        <a class="button is-fullwidth" href="/">Clear filters</a>
      </div>
    </div>
  </form>

  <div class="container mb-3">
    <p>Displaying {{ products.count }} item{{ products.count|pluralize }}</p>
  </div>

  <div class="columns is-multiline">
    {% for product in products %}
      <div class="column is-one-quarter">
        <div class="card tool-card">
          {# AI generated the product card structure and styling using Bulma #}
          <div class="card-image">
            <figure class="image is-4by3">
              <img
                  src="https://images.thdstatic.com/productImages/5619d857-14f0-4adb-a749-847468164632/svn/milwaukee-electricians-tool-sets-48-22-8111-48-22-2202-48-22-3079-64_600.jpg"
                  alt="{{ product.description }}">
            </figure>
          </div>
          <div class="card-content">
            <p class="title is-6">{{ product.description }}</p>
            <p class="subtitle is-7">{{ product.category.name }}</p>
            <div class="tags">
              {% for tag in product.tags.all %}
                <span class="tag is-light">{{ tag.name }}</span>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  </div>
</main>
</body>
</html>
